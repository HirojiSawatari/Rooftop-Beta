var app      = getApp();

var pageData = {
  data: {
    "static_vessel1":{
      "type":"static-vessel",
      "style":"background-color:rgba(0, 0, 0, 0);margin-left:0;margin-top:0;opacity:1;",
      "content":[{
        "type":"picture",
        "style":"opacity:1;background-color:transparent;border-color:rgb(34, 34, 34);border-style:none;height:117.1875rpx;width:750rpx;margin-left:auto;margin-right:auto;",
        "content":"http:\/\/img.weiye.me\/zcimgdir\/album\/file_5a6031fbd47ea.jpg",
        "customFeature":{
          "boxShadow":"('#000','0','0','5')",
          "boxColor":"#000",
          "boxX":"0",
          "boxY":"0",
          "boxR":"5"
        },
        "animations":[],
        "compId":"data.content[0]",
        "parentCompid":"static_vessel1"
      }],
      "customFeature":{
        "boxColor":"rgb(0, 0, 0)",
        "boxR":"5px",
        "boxStyle":false,
        "boxX":"0",
        "boxY":"0"
      },
      "animations":[],
      "page_form":"",
      "compId":"static_vessel1"
    },
    "free_vessel2": {
      "type": "free-vessel",
      "style": "width:750rpx;height:602.5rpx;background-color:rgb(255, 255, 255);margin-bottom:auto;margin-right:auto;margin-top:23.4375rpx;opacity:1;margin-left:auto;",
      "content": [{
        "type": "picture",
        "style": "opacity:1;background-color:transparent;border-color:rgb(34, 34, 34);border-style:none;height:440.4375rpx;width:703.125rpx;margin-left:0;margin-right:0;margin-top:0;position:absolute;left:23.4375rpx;top:140.625rpx;right:auto;",
        "content": "http:\/\/img.weiye.me\/zcimgdir\/album\/file_5a602a7679f20.jpg",
        "customFeature": {
          "boxShadow": "5",
          "boxColor": "#000",
          "boxX": "0",
          "boxY": "0",
          "boxR": "5"
        },
        "animations": [],
        "compId": "data.content[0]",
        "parentCompid": "free_vessel2"
      }, {
        "type": "text",
        "style": "background-color:rgba(0, 0, 0, 0);border-color:rgb(34, 34, 34);border-style:none;border-width:4.6875rpx;color:rgb(53, 53, 53);font-size:30.15625rpx;height:44.53125rpx;width:234.375rpx;line-height:44.53125rpx;margin-left:0;margin-top:0;opacity:1;text-align:left;position:absolute;left:157.03125rpx;top:15.78125rpx;margin-right:0;right:auto;",
        "content": "\u6c83\u662fsei\u5416",
        "customFeature": {
          "boxColor": "rgb(0, 0, 0)",
          "boxR": "5",
          "boxStyle": false,
          "boxX": "0", "boxY": "0"
        },
        "animations": [],
        "compId": "data.content[1]",
        "parentCompid": "free_vessel2",
        "markColor": "",
        "mode": 0
      }, {
        "type": "picture",
        "style": "opacity:1;background-color:transparent;border-color:rgb(255, 255, 255);border-radius:23.4375rpx;border-style:solid;border-width:2.34375rpx;height:117.1875rpx;width:117.1875rpx;margin-left:0;margin-right:0;margin-top:0;position:absolute;left:23.4375rpx;top:15.78125rpx;",
        "content": "http:\/\/img.weiye.me\/zcimgdir\/thumb\/t_15162563735a603c7555f5b.jpg",
        "customFeature": {
          "boxShadow": "('#000','0','0','5')",
          "boxColor": "#000",
          "boxX": "0",
          "boxY": "0",
          "boxR": "5"
        },
        "animations": [],
        "compId": "data.content[2]",
        "parentCompid": "free_vessel2"
      }, {
        "type": "text",
        "style": "color:rgb(178, 178, 178);font-size:23.4375rpx;text-align:left;position:absolute;left:23.4375rpx;top:13.4375rpx;margin-right:23.4375rpx;margin-bottom:23.4375rpx;z-index:999;",
        "styleView": "background-color:rgb(53, 53, 53);border-color:rgb(34, 34, 34);border-style:none;border-width:4.6875rpx;height:133.53125rpx;width:703.125rpx;margin-left:0;margin-top:0;opacity:1;position:absolute;left:23.4375rpx;top:450rpx;margin-right:0;opacity:0.7;",
        "content": "\u6211\u4eec\u6cb3\u5357\u9a7b\u9a6c\u5e97\uff0c\u6709\u5c0f\u78e8\u6cb9\uff0c\u829d\u9ebb\uff0c\u771f\u725b\u903c\u561e",
        "customFeature": {
          "boxColor": "rgb(0, 0, 0)",
          "boxR": "5",
          "boxStyle": false,
          "boxX": "0",
          "boxY": "0"
        },
        "animations": [],
        "compId": "data.content[3]",
        "parentCompid": "free_vessel2",
        "markColor": "",
        "mode": 0
      }, {
        "type": "text",
        "style": "background-color:rgba(0, 0, 0, 0);border-color:rgb(34, 34, 34);border-style:none;border-width:4.6875rpx;color:rgb(53, 53, 53);font-size:25.78125rpx;height:44.53125rpx;line-height:46.875rpx;margin-left:0;margin-top:0;opacity:1;text-align:left;position:absolute;left:656.25rpx;top:25.78125rpx;margin-right:0;",
        "content": "1111",
        "customFeature": {
          "boxColor": "rgb(0, 0, 0)",
          "boxR": "5",
          "boxStyle": false,
          "boxX": "0",
          "boxY": "0"
        },
        "animations": [],
        "compId": "data.content[4]",
        "parentCompid": "free_vessel2",
        "markColor": "",
        "mode": 0
      }, {
        "type": "text",
        "style": "background-color:rgba(0, 0, 0, 0);border-color:rgb(34, 34, 34);border-style:none;border-width:4.6875rpx;color:rgb(53, 53, 53);font-size:25.78125rpx;height:39.84375rpx;width:73.49853515625rpx;line-height:46.875rpx;margin-left:0;margin-top:0;opacity:1;text-align:left;position:absolute;left:656.25rpx;top:82.03125rpx;margin-right:0;",
        "content": "111",
        "customFeature": {
          "boxColor": "rgb(0, 0, 0)",
          "boxR": "5",
          "boxStyle": false,
          "boxX": "0",
          "boxY": "0"
        },
        "animations": [],
        "compId": "data.content[5]",
        "parentCompid": "free_vessel2",
        "markColor": "",
        "mode": 0
      }, {
        "type": "picture",
        "style": "opacity:1;background-color:transparent;border-color:rgb(34, 34, 34);border-style:none;height:46.875rpx;width:46.875rpx;margin-left:0;margin-right:0;margin-top:0;position:absolute;left:597.65625rpx;top:25.78125rpx;",
        "content": "http:\/\/img.weiye.me\/zcimgdir\/thumb\/t_15162589805a6046a44f4a8.png",
        "customFeature": {
          "boxShadow": "('#000','0','0','5')",
          "boxColor": "#000",
          "boxX": "0",
          "boxY": "0",
          "boxR": "5"
        },
        "animations": [],
        "compId": "data.content[6]",
        "parentCompid": "free_vessel2"
      }, {
        "type": "picture",
        "style": "opacity:1;background-color:transparent;border-color:rgb(34, 34, 34);border-style:none;height:46.875rpx;width:46.875rpx;margin-left:0;margin-right:0;margin-top:0;position:absolute;left:597.65625rpx;top:82.03125rpx;",
        "content": "http:\/\/img.weiye.me\/zcimgdir\/thumb\/t_15162583015a6043fd3a60b.png",
        "customFeature": {
          "boxShadow": "('#000','0','0','5')",
          "boxColor": "#000",
          "boxX": "0",
          "boxY": "0",
          "boxR": "5"
        },
        "animations": [],
        "compId": "data.content[7]",
        "parentCompid": "free_vessel2"
      }, {
        "type": "text",
        "style": "background-color:rgba(0, 0, 0, 0);border-color:rgb(34, 34, 34);border-style:none;border-width:4.6875rpx;color:rgb(0, 0, 0);font-size:27.8125rpx;height:44.53125rpx;line-height:44.53125rpx;margin-left:0;margin-top:0;opacity:1;text-align:left;position:absolute;left:157.03125rpx;top:82.03125rpx;margin-right:0;",
        "content": "2017-11-11 11:11:11",
        "customFeature": {
          "boxColor": "rgb(0, 0, 0)",
          "boxR": "5",
          "boxStyle": false,
          "boxX": "0",
          "boxY": "0"
        },
        "animations": [],
        "compId": "data.content[8]",
        "parentCompid": "free_vessel2",
        "markColor": "",
        "mode": 0
      }],
      "customFeature": {
        "boxColor": "rgb(0, 0, 0)",
        "boxR": 5,
        "boxStyle": false,
        "boxX": 0,
        "boxY": 0,
        "action": "none",
        "community-id": "71513",
        "community-name": " \u7b11\u8bdd"
      },
      "animations": [],
      "page_form": "",
      "compId": "free_vessel2"
    },
    "list": [],
    "date": [],
    "avatar": [],
    "username": [],
    "commend_num": [],
    "has_tabbar": 0,
    "page_hidden": true,
    "page_form": "",
    "top_nav": {
      "navigationBarBackgroundColor": "#000000",
      "navigationBarTextStyle": "white",
      "navigationBarTitleText": "\u6bb5\u5b50"
    }
  },
  need_login: false,
  page_router: 'cur_new',
  page_form: 'none',
  list_compids_params: [],
  user_center_compids_params: [],
  goods_compids_params: [],
  prevPage: 0,
  tostoreComps: [],
  carouselGroupidsParams: [],
  relobj_auto: [],
  bbsCompIds: [],
  dynamicVesselComps: [],
  communityComps: [],
  franchiseeComps: [],
  cityLocationComps: [],
  seckillOnLoadCompidParam: [],
  dynamicClassifyGroupidsParams: [],
  videoListComps: [],
  videoProjectComps: [],
  returnToVersionFlag: true,
  requesting: false,
  requestNum: 1,
  modelChoose: [],
  modelChooseId: '',
  modelChooseName: [],
  onLoad: function (e) {
    //获取发布表
    var that = this
    wx.request({
      url: 'https://www.katouspace.com/table_publish.php?method=select_lid_like&lid=1',
      data: {},
      method: 'GET',
      success: function (res) {
        // success
        that.setData({
          "list": res.data
        })
        //转换日期格式
        var date = new Array()
        var n = 0
        for (var x = 0; x < res.data.length; x++) {
          var temptime = res.data[x].upload_time
          var timestamp = ""
          timestamp = timestamp.split('')
          //遍历时间字符串
          for (var i = 0; i < 12; i++) {
            if (i === 4) {
              timestamp.splice(n, 1, '-')
              n = n + 1
            }
            else if (i === 6) {
              timestamp.splice(n, 1, '-')
              n = n + 1
            }
            else if (i === 8) {
              timestamp.splice(n, 1, ' ')
              n = n + 1
            }
            else if (i === 10) {
              timestamp.splice(n, 1, ':')
              n = n + 1
            }
            else if (i === 12) {
              timestamp.splice(n, 1, ':')
              n = n + 1
            }
            timestamp.splice(n, 1, temptime[i])
            n = n + 1
          }
          timestamp = timestamp.join('')
          date[x] = timestamp
        }
        that.setData({
          "date": date
        })
        //获取用户信息
        var name = new Array()
        var avatar = new Array()
        for (var i = 0; i < res.data.length; i++) {
          var oid = res.data[i].openID
          wx.request({
            url: 'https://www.katouspace.com/table_user.php?method=select&openID=' + oid,
            data: {},
            method: 'GET',
            success: function (res) {
              // success
              var usdata = res.data
              that.data.username[name.length] = usdata.name
              that.data.avatar[name.length] = usdata.avatar
              console.log(name.length)
              that.setData({
                "username": that.data.username,
                "avatar": that.data.avatar
              })
              name[name.length] = usdata.name
              avatar[name.length] = usdata.avatar
            },
            fail: function () {
              // fail
            },
            complete: function () {
              // complete
            }
          })
        }
        //获取评论数字
        var com_num = new Array()
        for (var i = 0; i < res.data.length; i++) {
          var pid = res.data[i].Pid
          wx.request({
            url: 'https://www.katouspace.com/table_comment.php?method=select&pid=' + pid,
            data: {},
            method: 'GET',
            success: function (res) {
              // success
              var usdata = res.data
              that.data.commend_num[com_num.length] = usdata.length
              that.setData({
                "commend_num": that.data.commend_num,
              })
              com_num[com_num.length] = usdata.length
            },
            fail: function () {
              // fail
            },
            complete: function () {
              // complete
            }
          })
        }
      },
      fail: function () {
        // fail
      },
      complete: function () {
        // complete
      }
    })
    app.onPageLoad(e);
  },
  dataInitial: function () {
    app.pageDataInitial();
  },
  onShareAppMessage: function (e) {
    return app.onPageShareAppMessage(e);
  },
  onShow: function () {
    app.onPageShow();
  },
  reachBottomFuc: [],
  onReachBottom: function () {
    app.onPageReachBottom(this.reachBottomFuc);
  },
  onUnload: function () {
    app.onPageUnload();
  },
  tapPrevewPictureHandler: function (e) {
    app.tapPrevewPictureHandler(e);
  },
  suspensionBottom: function () {
    app.suspensionBottom();
  },
  pageScrollFunc: function (e) {
    app.pageScrollFunc(e);
  },
  dynamicVesselScrollFunc: function (e) {
    app.dynamicVesselScrollFunc(e);
  },
  goodsScrollFunc: function (e) {
    app.goodsScrollFunc(e);
  },
  takeoutStyleScrollFunc: function (e) {
    app.takeoutStyleScrollFunc(e);
  },
  franchiseeScrollFunc: function (e) {
    app.franchiseeScrollFunc(e);
  },
  seckillScrollFunc: function (e) {
    app.seckillScrollFunc(e);
  },
  videoScrollFunc: function (e) {
    app.videoScrollFunc(e);
  },
  carouselVideoClose: function (e) {
    app.carouselVideoClose(e);
  },
  changeCount: function (e) {
    app.changeCount(e);
  },
  inputChange: function (e) {
    app.inputChange(e);
  },
  bindDateChange: function (e) {
    app.bindDateChange(e);
  },
  bindTimeChange: function (e) {
    app.bindTimeChange(e);
  },
  bindSelectChange: function (e) {
    app.bindSelectChange(e);
  },
  bindScoreChange: function (e) {
    app.bindScoreChange(e);
  },
  submitForm: function (e) {
    app.submitForm(e);
  },
  udpateVideoSrc: function (e) {
    app.udpateVideoSrc(e);
  },
  tapMapDetail: function (e) {
    app.tapMapDetail(e);
  },
  uploadFormImg: function (e) {
    app.uploadFormImg(e);
  },
  deleteUploadImg: function (e) {
    app.deleteUploadImg(e);
  },
  listVesselTurnToPage: function (e) {
    app.listVesselTurnToPage(e);
  },
  dynamicVesselTurnToPage: function (e) {
    app.dynamicVesselTurnToPage(e);
  },
  userCenterTurnToPage: function (e) {
    app.userCenterTurnToPage(e);
  },
  turnToGoodsDetail: function (e) {
    app.turnToGoodsDetail(e);
  },
  turnToFranchiseeDetail: function (e) {
    app.turnToFranchiseeDetail(e);
  },
  turnToSeckillDetail: function (e) {
    app.turnToSeckillDetail(e);
  },
  sortListFunc: function (e) {
    app.sortListFunc(e);
  },
  bbsInputComment: function (e) {
    app.bbsInputComment(e);
  },
  bbsInputReply: function (e) {
    app.bbsInputReply(e);
  },
  uploadBbsCommentImage: function (e) {
    app.uploadBbsCommentImage(e);
  },
  uploadBbsReplyImage: function (e) {
    app.uploadBbsReplyImage(e);
  },
  deleteCommentImage: function (e) {
    app.deleteCommentImage(e);
  },
  deleteReplyImage: function (e) {
    app.deleteReplyImage(e);
  },
  bbsPublishComment: function (e) {
    app.bbsPublishComment(e);
  },
  clickBbsReplyBtn: function (e) {
    app.clickBbsReplyBtn(e);
  },
  bbsPublishReply: function (e) {
    app.bbsPublishReply(e);
  },
  searchList: function (e) {
    app.searchList(e);
  },
  selectLocal: function (e) {
    app.selectLocal(e);
  },
  cancelCity: function (e) {
    app.cancelCity(e);
  },
  bindCityChange: function (e) {
    app.bindCityChange(e);
  },
  submitCity: function (e) {
    app.submitCity(e);
  },
  openTakeoutLocation: function (e) {
    app.openTakeoutLocation(e);
  },
  callTakeout: function (e) {
    app.callTakeout(e);
  },
  getMoreAssess: function (e) {
    app.getMoreAssess(e);
  },
  changeEvaluate: function (e) {
    app.changeEvaluate(e)
  },
  deleteAllCarts: function (e) {
    app.deleteAllCarts(e);
  },
  clickCategory: function (e) {
    app.clickCategory(e);
  },
  goodsListMinus: function (e) {
    app.goodsListMinus(e);
  },
  goodsListPlus: function (e) {
    app.goodsListPlus(e);
  },
  cartListMinus: function (e) {
    app.cartListMinus(e);
  },
  cartListPlus: function (e) {
    app.cartListPlus(e);
  },
  changeAssessType: function (e) {
    app.changeAssessType(e);
  },
  showShoppingCartPop: function (e) {
    app.showShoppingCartPop(e);
  },
  hideShoppingCart: function (e) {
    app.hideShoppingCart(e);
  },
  showGoodsDetail: function (e) {
    app.showGoodsDetail(e);
  },
  hideDetailPop: function (e) {
    app.hideDetailPop(e);
  },
  hideModelPop: function (e) {
    app.hideModelPop(e);
  },
  chooseModel: function (e) {
    app.chooseModel(e);
  },
  sureChooseModel: function (e) {
    app.sureChooseModel(e);
  },
  clickChooseComplete: function (e) {
    app.clickChooseComplete(e);
  },
  reLocalAddress: function (e) {
    app.reLocalAddress(e);
  },
  tapGoodsTradeHandler: function (e) {
    app.tapGoodsTradeHandler(e);
  },
  tapVideoHandler: function (e) {
    app.tapVideoHandler(e);
  },
  tapVideoPlayHandler: function (e) {
    app.tapVideoPlayHandler(e);
  },
  tapVideoHandler: function (e) {
    app.tapVideoHandler(e);
  },
  tapInnerLinkHandler: function (e) {
    app.tapInnerLinkHandler(e);
  },
  tapPhoneCallHandler: function (e) {
    app.tapPhoneCallHandler(e);
  },
  tapRefreshListHandler: function (e) {
    app.tapRefreshListHandler(e);
  },
  tapGetCouponHandler: function (e) {
    app.tapGetCouponHandler(e);
  },
  tapCommunityHandler: function (e) {
    app.tapCommunityHandler(e);
  },
  tapPageShareHandler: function (e) {
    app.tapPageShareHandler(e);
  },
  turnToCommunityPage: function (e) {
    app.turnToCommunityPage(e);
  },
  tapToFranchiseeHandler: function (e) {
    app.tapToFranchiseeHandler(e);
  },
  tapToTransferPageHandler: function () {
    app.tapToTransferPageHandler();
  },
  tapToSeckillHandler: function (e) {
    app.tapToSeckillHandler(e);
  },
  tapToPromotionHandler: function () {
    app.tapToPromotionHandler();
  },
  tapToCouponReceiveListHandler: function () {
    app.tapToCouponReceiveListHandler();
  },
  tapToRechargeHandler: function () {
    app.tapToRechargeHandler();
  },
  tapToXcx: function (e) {
    app.tapToXcx(e);
  },
  tapFranchiseeLocation: function (e) {
    app.tapFranchiseeLocation(e);
  },
  showAddShoppingcart: function (e) {
    app.showAddShoppingcart(e);
  },
  hideAddShoppingcart: function () {
    app.hideAddShoppingcart();
  },
  selectGoodsSubModel: function (e) {
    app.selectGoodsSubModel(e);
  },
  resetSelectCountPrice: function () {
    app.resetSelectCountPrice();
  },
  // 电商
  clickGoodsMinusButton: function (e) {
    app.clickGoodsMinusButton();
  },
  clickGoodsPlusButton: function (e) {
    app.clickGoodsPlusButton();
  },
  sureAddToShoppingCart: function () {
    app.sureAddToShoppingCart();
  },
  sureAddToBuyNow: function () {
    app.sureAddToBuyNow();
  },
  clickTostoreMinusButton: function (e) {
    app.clickTostoreMinusButton(e);
  },
  clickTostorePlusButton: function (e) {
    app.clickTostorePlusButton(e);
  },
  readyToPay: function () {
    app.readyToTostorePay();
  },
  getValidateTostore: function () {
    app.getValidateTostore();
  },
  goToShoppingCart: function () {
    app.goToShoppingCart();
  },
  getCartList: function () {
    app.getTostoreCartList();
  },
  stopPropagation: function () {
  },
  turnToSearchPage: function (e) {
    app.turnToSearchPage(e);
  },
  previewImage: function (e) {
    var dataset = e.currentTarget.dataset;
    app.previewImage({
      current: dataset.src,
      urls: dataset.previewImgarr,
    });
  },
  scrollPageTop: function () {
    app.pageScrollTo(0);
  },
  suspensionTurnToPage: function (e) {
    app.suspensionTurnToPage(e);
  },
  tapToLuckyWheel: function (e) {
    app.tapToLuckyWheel(e);
  },
  tapToGoldenEggs: function (e) {
    app.tapToGoldenEggs(e);
  },
  tapToScratchCard: function (e) {
    app.tapToScratchCard(e);
  },
  tapToLuckyWheel: function (e) {
    app.tapToLuckyWheel(e);
  },
  keywordList: {},
  bindSearchTextChange: function (e) {
    this.keywordList[e.currentTarget.dataset.compid] = e.detail.value;
  },
  // 文字组件跳到地图
  textToMap: function (e) {
    app.textToMap(e);
  },
  tapDynamicClassifyFunc: function (e) {
    app.tapDynamicClassifyFunc(e);
  },
  // 跳转到视频详情
  turnToVideoDetail: function (e) {
    app.turnToVideoDetail(e);
  },
  // 单个视频组件播放视频
  startPlayVideo: function (e) {
    app.startPlayVideo(e);
  },
  // 视频播放报错
  videoError: function (e) {
    app.showModal({
      content: e.detail.errMsg
    });
  }
};
Page(pageData);
